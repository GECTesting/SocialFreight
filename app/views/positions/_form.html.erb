<div id="opform" class="row">
<%= simple_form_for @position, :validate => true do |f| %>
  <%= f.error_notification %>

  <fieldset>
    <div class="row">
      <div class="page-header span16 columns">
        <h4>New Position</h4>
      </div>
      <div class="span8 columns">
        <%= f.input :operation do %>
          <%= f.input_field :operation, :as => :select, :collection => Patron.operations.map { |r| [r[1], r[0] ] }, :include_blank => false %>
          <%= f.input_field :direction, :as => :select, :collection => Position.direction_types.map { |r| [r[1], r[0] ] }, :include_blank => false %>
          <%= f.input_field :paid_at, :as => :select, :collection => Position.payment_types.map { |r| [r[1], r[0] ] }, :include_blank => false %>
        <% end %>
        <%= f.input :master_reference, :label => "Master Stock No" do %>
          <%= f.input_field :master_reference, :size => 20 %>
          <%= f.input_field :master_type, :as => :select, :collection => Position.master_types.map { |r| [r[1], r[0] ] }, :include_blank => false %>
        <% end %>
        <%= f.input :agent_reference, :label => "Reservation" %>
      </div>
      <div class="span8 columns">
        <%= f.input :branch do %>
          <%= f.input_field :branch, :as => :select, :collection => current_patron.branches, :include_blank => false%>
        <% end %>
        <%= f.input :master_date, :input_html => {:class => "datepicker", :size => 10}, :label => "Master Date" %>
        <%= f.input :freight_price do %>
          <%= f.input_field :freight_price, :class => "small" %>
          <%= f.input_field :freight_curr, :as => :select, :collection => Currency.all, :include_blank => false, :class => "medium" %>
        <% end %>
      </div>
    </div>
    <div class="row">
      <div class="page-header span16 columns">
        <h4>Sefer Bilgileri</h4>
      </div>
      <div class="span8 columns">
        <%= f.input :transporter, :input_html => {:class => "token_input", "data-url" => "/companies.json", "data-pre" => @position.transporter ? @position.transporter.prepopulate_tokens.to_json : nil } %>
        <%= f.input :forwarder, :input_html => {:class => "token_input", "data-url" => "/companies.json", "data-pre" => @position.forwarder ? @position.forwarder.prepopulate_tokens.to_json : nil } %>
        <%= f.input :agent, :input_html => {:class => "token_input", "data-url" => "/companies.json", "data-pre" => @position.agent ? @position.agent.prepopulate_tokens.to_json : nil }  %>
        <%= f.input :agent_price do %>
          <%= f.input_field :agent_price, :class => "small" %>
          <%= f.input_field :agent_curr, :as => :select, :collection => Currency.all, :include_blank => false, :class => "medium" %>
        <% end %>
        <%= f.input :description, :as => :text, :input_html => {:rows => 3, :cols => 37}, :label => "Notes" %>
      </div>
      <div class="span8 columns">
        <%= f.input :load_place, :input_html => {:class => "token_input", "data-url" => "/places.json", "data-pre" => @position.load_place ? @position.load_place.prepopulate_tokens.to_json : nil} %>
        <%= f.input :load_date, :input_html => {:class => "datepicker", :size => 10} %>

        <%= f.input :unload_place, :input_html => {:class => "token_input", "data-url" => "/places.json", "data-pre" => @position.unload_place ? @position.unload_place.prepopulate_tokens.to_json : nil} %>
        <%= f.input :unload_date, :input_html => {:class => "datepicker", :size => 10} %>

        <%= f.input :voyage do %>
          <%= f.input_field :voyage, :size => 15 %>
          <%= f.input_field :vessel, :size => 15 %>
        <% end %>
        <%= f.input :contract_no %>
        <div class="clearfix" style="margin-left:250px">
          <%= f.button :submit, :class => 'btn primary' %>
        </div>
      </div>
    </div>
  </fieldset>

<% end %>
</div>
